<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="The CooPLa Project">
    <meta name="author" content="Nuno Oliveira">

    <title>The CooPLa Project</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/modern-business.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome-4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">The CooPLa Project</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="coopla.html">CooPLa</a>
                            </li>
                            <li>
                                <a href="recoopla.html">ReCooPLa</a>
                            </li>
                            <li>
                                <a href="publications.html">Publications</a>
                            </li>
                        </ul>
                    </li>
                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="tools.html">CooPLa Editor</a>
                            </li>
                            <li>
                                <a href="tools.imcreotool.html">IMCREOTool</a>
                            </li>
                            <li>
                                <a href="tools.reconf_engine.html">Reconfiguration Engine</a>
                            </li>
                            <li>
                                <a href="tools.reoimporter.html">Reo XML Importer</a>
                            </li>
                            <li>
                                <a href="tools.reoexporter.html">Reo XML Exporter</a>
                            </li>
                            <li>
                                <a href="tools.rslexporter.html">RSL for Vereofy</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="team.html">Team</a>
                    </li>
                    <!--li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Portfolio <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="portfolio-1-col.html">1 Column Portfolio</a>
                            </li>
                            <li>
                                <a href="portfolio-2-col.html">2 Column Portfolio</a>
                            </li>
                            <li>
                                <a href="portfolio-3-col.html">3 Column Portfolio</a>
                            </li>
                            <li>
                                <a href="portfolio-4-col.html">4 Column Portfolio</a>
                            </li>
                            <li>
                                <a href="portfolio-item.html">Single Portfolio Item</a>
                            </li>
                        </ul>
                    </li-->
                    <!--li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Blog <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="blog-home-1.html">Blog Home 1</a>
                            </li>
                            <li>
                                <a href="blog-home-2.html">Blog Home 2</a>
                            </li>
                            <li>
                                <a href="blog-post.html">Blog Post</a>
                            </li>
                        </ul>
                    </li-->
                    <!--li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Other Pages <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="full-width.html">Full Width Page</a>
                            </li>
                            <li>
                                <a href="sidebar.html">Sidebar Page</a>
                            </li>
                            <li>
                                <a href="faq.html">FAQ</a>
                            </li>
                            <li>
                                <a href="404.html">404</a>
                            </li>
                            <li>
                                <a href="pricing.html">Pricing Table</a>
                            </li>
                        </ul>
                    </li-->
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Content -->
    <div class="container">

        <!-- Page Heading/Breadcrumbs -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Reconfiguration Engine
                </h1>
                <ol class="breadcrumb">
                    <li><a href="index.html">Home</a>
                    </li>
                    <li><a href="tools.html">Tools</a>
                    </li>
                    <li class="active">Reconfiguration Engine</li>
                </ol>
            </div>
        </div>
        <!-- /.row -->

        <!-- Content Row -->
        <div class="row">
            <div class="col-lg-12">
                <!--SOON.-->
                <p>
                    As it often happens with domain specific languages, ReCooPLa is translated into a subset of Java, which is then recognised and executed by an engine. 
                    This engine, referred to as the <i>Reconfiguration Engine</i>, is developed in Java to execute reconfigurations specified in ReCooPLa over coordination patterns, which are defined in CooPLa, a lightweight language to define the graph-like structure of coordination patterns. 
                </p>
                
            </div>
        </div>
        <!-- /.row -->
        <br/>

        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Details</h2>
            </div>
            <div class="col-lg-12">

                <ul id="myTab" class="nav nav-tabs nav-justified">
                    <li class="active"><a href="#model" data-toggle="tab"><i class="fa fa-magic"></i> Model</a>
                    </li>
                    <li class=""><a href="#architecture" data-toggle="tab"><i class="fa fa-sitemap"></i> Architecture and Development</a> <!--fa-code-fork-->
                    </li>
                </ul>

                <div id="myTabContent" class="tab-content">
                  
                    <!--MODEL-->
                    <div class="tab-pane fade active in" id="model">
                        <h4>Model</h4>
                        <p>
                            The model of the engine is as simple as it can be, taking into account only a few entities. 
                            The corresponding Unified Modelling Language (UML) class diagram is presented below:
                        </p>
                        <div class="row">
                            <div class="col-lg-12">
                                <center>
                                    <img class="img-responsive" src="css/images/model.png" alt="" style="width:70%">
                                </center>
                            </div>
                        </div>

                        <p>
                            Package <code>cp.model</code>, represented as a shaded diagram, concerns the model of a coordination pattern. 
                            This is actually, the implementation of the formal model presented by Oliveira and Barbosa (<i>cf.</i>, <a href="publications.html">publications</a> of 2013). 
                        </p>
                        <p>
                            Both <code>CoordinationPattern</code> and <code>Channel</code> classes provide attributes and methods that match the attributes and operations of the <i>Pattern</i> and <i>Channel</i> types in ReCooPLa. 
                        </p>
                        <p>
                            The complete mapping of the attributes and operation of ReCooPLa structured data types to the corresponding methods of the Reconfiguration Engine classes is:
                        </p>
                        <div class="row">
                            <table class="table table-hover" style="width:80%" align="center">
                                <tr>
                                    <th>ReCooPLa structured data types</th>
                                    <th>Reconfiguration Engine classes</th>
                                </tr>
                                <tr>
                                    <td>Pattern.in</td>
                                    <td>CoordinationPattern.getIn()</td>
                                </tr>
                                <tr>
                                    <td>Pattern.in[i]</td>
                                    <td>CoordinationPattern.getIn(int i)</td>
                                </tr>
                                <tr>
                                    <td>Pattern.out</td>
                                    <td>CoordinationPattern.getOut()</td>
                                </tr>
                                <tr>
                                    <td>Pattern.out[i]</td>
                                    <td>CoordinationPattern.getOut(int i)</td>
                                </tr>
                                <tr>
                                    <td>Pattern.nodes</td>
                                    <td>CoordinationPattern.getNodes()</td>
                                </tr>
                                <tr>
                                    <td>Pattern.names</td>
                                    <td>CoordinationPattern.getNames()</td>
                                </tr>
                                <tr>
                                    <td>Channel.in</td>
                                    <td>Channel.getIn()</td>
                                </tr>
                                <tr>
                                    <td>Channel.in[i]</td>
                                    <td>Channel.getIn(int i)</td>
                                </tr>
                                <tr>
                                    <td>Channel.out</td>
                                    <td>Channel.getOut()</td>
                                </tr>
                                <tr>
                                    <td>Channel.out[i]</td>
                                    <td>Channel.getOut(int i)</td>
                                </tr>
                                <tr>
                                    <td>Channel.name</td>
                                    <td>Channel.getId()</td>
                                </tr>
                            </table>
                        </div>

                        <p>
                            The remaining entities of the diagram are concerned with reconfigurations themselves, and assumed to belong to a <code>cp.reconfiguration</code> package. 
                            Clearly, classes <code>Par</code>, <code>Const</code>, <code>Remove</code>, <code>Join</code>, <code>Split</code> and <code>Id</code> are the implementation of the corresponding primitive reconfigurations. 
                            The relationships with the elements of the <code>cp.model</code> package define their arguments. 
                        <!--</p>
                        <p>-->
                            Moreover, these classes have a common implicit method (given by the interface <code>IReconfiguration</code>): <code>apply(CoordinationPattern p)</code>, where the behaviour of these primitives is defined as the combined effect of their application to the coordination pattern <code>p</code> given as argument.
                        </p>
                        <p>
                            The <code>Reconfiguration</code> class represents a generic reconfiguration that requires its concrete classes to implement the <code>apply(CoordinationPattern p)</code> method. The careful reader may have noticed that the concrete classes of <code>Reconfiguration</code> are greyed-out, and also that they are not all presented. This is where the most interesting part of the engine comes into play. In fact, there are no such concrete classes at design time. All of them are created dynamically, at runtime, by the <code>ReconfigurationCreator</code> class, taking advantage of reflection in <i>Java Virtual Machine (JVM)</i>. This implementation follows a similar approach to the well-known Factory design pattern, but instead of creating instances, it creates concrete classes of <code>Reconfiguration</code>. 
                        </p>
                        <p>
                            The idea is that each reconfiguration definition within a ReCooPLa specification gives rise to a class with an <code>apply(CoordinationPattern p)</code> method.
                            The content of such method is derived from the content of the ReCooPLa reconfiguration. <!--, taking advantage of the translation schema presented in Section 5.3. -->
                            This creates a Java file for each reconfiguration in the ReCooPLa specification. 
                            These files are compiled in runtime, into Java class files and, via reflection, loaded into the running JVM. 
                        </p>
                        <p>
                            Each reconfiguration in a ReCooPLa specification yields a new class, which extends the abstract class <code>Reconfiguration</code>, whereas the <i>main</i> reconfiguration yields a single class <code>Run</code>, which uses, via reflection, the reconfigurations previously generated. Thus, the application of reconfigurations becomes as simple as calling, in the the <code>Run</code> class, the apply method from instances of such classes.
                        </p>
                        <!--
                        <p>
                            However, for this to be possible, it is first necessary to correctly translate ReCooPLa constructs into the code accepted by the Reconfiguration Engine. Section 5.3 goes through the details of such a translation.
                        </p>-->
                        <p>
                            A translation can only occur when the ReCooPLa specification is syntactically and semantically correct. 
                            This is accomplish through the use of the ReCooPLa processor. In particular, the parser that ensures syntactic correctness and the semantic analyser that reports errors concerning structure, behaviour and data types.
                        </p>


                        <br/>
                    </div>




                    <!--Architecture-->
                    <div class="tab-pane fade" id="architecture">
                        <h4>Architecture and Development</h4>
                        <p>
                            The Reconfiguration Engine is part of a broader system implemented as an eclipse plugin, comprising language processors, editors and other associated tools.
                        </p>
                        <p>
                            As expected, one of the processors is the ReCooPLa ’s. 
                            The other is for processing CooPLa specifications, in order to provide the coordination patterns up on which reconfigurations are applied. The high-level system architecture with such components is presented below:
                        </p>
                        <br/>
                        <div class="row">
                            <div class="col-lg-12">
                                <center>
                                    <img class="img-responsive" src="css/images/architecture.png" alt="" style="width:50%">
                                </center>
                            </div>
                        </div>
                        <br/>
                        <p>
                            Let’s now focus on the Editor component of the system. 
                            It is an Eclipse plugin developed in Java as a plug-in to allow the creation of CooPLa and ReCooPLa files specifications.
                        </p>
                        <p>
                            The ReCooPLa part of the editor borrows features of the ReCooPLa processor to analyse the code, dynamically, and then annotate it with markers pointing to errors detected in the syntactic and semantic analysis. 
                            This is accomplished by adopting the reconciling techniques fomented in editor development within Eclipse. 
                        </p>
                        <p>
                            The reconciler entity allows for running the ReCooPLa processor in the editor background, in a separated thread, so that the editor does not freeze. The ReCooPLa processor is invoked periodically (<i>e.g.</i>, when the user stops coding) and it takes the input text with all the changes performed. 
                            The captured (syntactic and semantic) errors are then used by the reconciler to create annotations and problem marks, and add them to the editor view.
                        </p>
                        <!--Figure presents how these are presented by the editor.-->
                        <p>
                            The errors are pointed out by the annotations and problem markers provides some more details about the error. The annotations can provide also the error message when the user hovers the mouse over the red marks on both sides of the editor.
                            If there are no errors, the reconfigurations can be executed, according to the main reconfiguration, specified in ReCooPLa. 
                        </p>
                        <p>
                            Once this feature of the editor is started, a group of procedures are performed. 
                            First of all, before translating the reconfigurations, it is ensured that the specifications are syntactic and semantic valid. Then, the Java files, corresponding to the reconfigurations, are created by taking advantage of the translation obtained. <!-- through the process presented in Section 5.3. -->
                            These files are afterwards properly compiled taking into account the required dependencies. After compiling them, the created coordination patterns specified in the main of ReCooPLa (<i>i.e.</i>, the results of the application of the reconfigurations) are obtained. 
                        <!--</p>
                        <p>-->
                            This is achieved using Java Reflection, which is a powerful and useful technique that allows the inspection and modification of the structure and behaviour of an application at runtime as well as the instantiation of a new object, invocation of methods, and some other features.
                        </p>
                        <p>
                            The generated coordination patterns have a particular data structure that besides their structural information, also contains information about their stochastic instances, the environment and nodes. Each one of these data structures is converted into a graph structure and then sent to an Eclipse View, called <i>“Patterns Created”</i>. 
                            <!--Figure shows the result after a simple reconfiguration, where a simple Pattern2 with only one fifo channel is inserted into an existing one (Pattern1 which has two sync channels). -->
                        <!--</p>
                        <p>-->
                            Additionally, it is given to the user the possibility to save the internal representation of the generated coordination patterns to a CooPLa file in the file system. 
                            <!--Figure shows the dialog presented to the user to save the created patterns.-->
                        </p>
                    </div>

                </div>
            </div>
        </div>

        <hr>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>&copy; CooPLa Team 2014</p>
                </div>
            </div>
        </footer>

    </div>
    <!-- /.container -->

    <!-- jQuery Version 1.11.0 -->
    <script src="js/jquery-1.11.0.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

</body>

</html>
